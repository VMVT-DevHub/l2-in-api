{
  "type": "object",
  "title": "Sertifikatas prekių siuntai",
  "additionalProperties": false,
  "properties": {
    "siuntejas": {
      "type": "object",
      "title": "Siuntėjas",
      "additionalProperties": false,
      "default": {},
      "properties": {
        "asmuo": {
          "$ref": "#/definitions/asmuo-su-kodu"
        },
        "adresas": {
          "$ref": "#/definitions/adresas"
        },
        "patvirtinimo-iregistravimo-nr": {
          "$ref": "#/definitions/patvirtinimo-iregistravimo-nr"
        },
        "atsakingas-asmuo": {
          "$ref": "#/definitions/atsakingas-asmuo"
        }
      },
      "required": ["asmuo", "adresas", "patvirtinimo-iregistravimo-nr", "atsakingas-asmuo"],
      "errorMessage": {
        "required": {
          "asmuo": "Siuntėjas: Asmuo su kodu privalomas.",
          "adresas": "Siuntėjas: Adresas privalomas.",
          "patvirtinimo-iregistravimo-nr": "Siuntėjas: Patvirtinimo ir įregistravimo numeris privalomas.",
          "atsakingas-asmuo": "Siuntėjas: Atsakingas asmuo privalomas."
        }
      }
    },
    "marsrutas": {
      "type": "object",
      "title": "Kelionės maršrutas",
      "additionalProperties": false,
      "default": {},
      "required": ["eksportuojanti-salis", "tranzitines-salys", "importuojanti-salis"],
      "errorMessage": {
        "required": {
          "eksportuojanti-salis": "Maršrutas: Eksportuojanti šalis turi būti nurodyta.",
          "tranzitines-salys": "Maršrutas: Tranzitinės šalys turi būti pateiktos.",
          "importuojanti-salis": "Maršrutas: Importuojanti šalis turi būti nurodyta."
        }
      },
      "properties": {
        "eksportuojanti-salis": {
          "type": "object",
          "additionalProperties": false,
          "default": {},
          "required": ["salis"],
          "errorMessage": {
            "required": {
              "salis": "Maršrutas: Eksportuojanti šalis yra privaloma."
            }
          },
          "properties": {
            "salis": {
              "title": "Eksportuojanti šalis",
              "$ref": "#/definitions/salis",
              "default": "LTU"
            },
            "pkp-out": {
              "title": "Išvažiavimo PKP",
              "type": "string"
            }
          }
        },
        "tranzitines-salys": {
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["salis"],
            "errorMessage": {
              "required": {
                "salis": "Maršrutas: Tranzitinė šalis yra privaloma.",
                "pkp": "Maršrutas: PKP pavadinimas privalomas."
              }
            },
            "properties": {
              "salis": {
                "title": "Tranzitinė šalis",
                "$ref": "#/definitions/salis"
              },
              "pkp": {
                "title": "Įvažiavimo PKP",
                "type": "string"
              },
              "pkp-out": {
                "title": "Išvažiavimo PKP",
                "type": "string"
              }
            }
          }
        },
        "importuojanti-salis": {
          "type": "object",
          "additionalProperties": false,
          "required": ["salis"],
          "errorMessage": {
            "required": {
              "salis": "Maršrutas: Importuojanti šalis yra privaloma.",
              "pkp": "Maršrutas: PKP pavadinimas privalomas."
            }
          },
          "properties": {
            "salis": {
              "title": "Importuojanti šalis",
              "$ref": "#/definitions/salis"
            },
            "pkp": {
              "title": "Įvažiavimo PKP",
              "type": "string"
            }
          }
        }
      }
    },
    "siunta": {
      "type": "object",
      "title": "Vežėjo kontaktinė informacija",
      "additionalProperties": false,
      "properties": {
        "asmuo": {
          "$ref": "#/definitions/asmuo-su-kodu"
        },
        "adresas": {
          "$ref": "#/definitions/adresas"
        },
        "patvirtinimo-iregistravimo-nr": {
          "$ref": "#/definitions/patvirtinimo-iregistravimo-nr"
        },
        "transporto-priemones": {
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "rusis": {
                "title": "Transporto priemonės rūšis",
                "type": "string",
                "enum": ["Autokelių transporto priemonė", "Traukinys", "Lėktuvas", "Laivas", "Kita"]
              },
              "rusis-kita": {
                "title": "Nurodykite transporto rūšį",
                "type": "string"
              },
              "numeris": {
                "title": "Transporto priemonės Nr.",
                "type": "string"
              }
            },
            "required": ["rusis"],
            "errorMessage": {
              "required": {
                "rusis": "Siunta: Transporto priemonės rūšis yra privaloma."
              }
            }
          }
        },
        "transporto-priemones-dalys": {
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["dalis"],
            "errorMessage": {
              "required": {
                "dalis": "Siunta: Transporto priemonės dalis yra privaloma."
              }
            },
            "properties": {
              "dalis": {
                "title": "Transporto priemonės dalis",
                "type": "string",
                "enum": [
                  "Konteineris",
                  "Cisterna",
                  "Vagonas",
                  "Priekaba",
                  "Puspriekabė",
                  "Dėžė",
                  "Narvas",
                  "Kita"
                ]
              },
              "dalis-kita": {
                "title": "Nurodykite transporto priemonės dalį",
                "type": "string"
              },
              "numeris": {
                "type": "string"
              },
              "plombos-nr": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "pakrovimo-vieta": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "asmuo": {
          "$ref": "#/definitions/asmuo-su-kodu"
        },
        "adresas": {
          "$ref": "#/definitions/adresas"
        },
        "patvirtinimo-iregistravimo-nr": {
          "$ref": "#/definitions/patvirtinimo-iregistravimo-nr"
        },
        "data": {
          "$ref": "#/definitions/data"
        },
        "laikas": {
          "$ref": "#/definitions/laikas"
        }
      },
      "required": ["laikas", "data", "patvirtinimo-iregistravimo-nr", "adresas", "asmuo"],
      "errorMessage": {
        "required": {
          "laikas": "Pakrovimo vieta: Laikas privalomas.",
          "data": "Pakrovimo vieta: Data yra privaloma.",
          "patvirtinimo-iregistravimo-nr": "Pakrovimo vieta: Patvirtinimo ar įregistravimo numeris privalomas.",
          "adresas": "Pakrovimo vieta: Adresas privalomas.",
          "asmuo": "Pakrovimo vieta: Asmuo privalomas."
        }
      }
    },
    "prekes": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "kpn-kodas": {
            "title": "KPN kodas",
            "type": "string",
            "fetchEnumFrom": "kpn.getLeafIds"
          },
          "pavadinimas": {
            "title": "Pavadinimas",
            "type": "string"
          },
          "komercinis-lotyniskas-pavadinimas": {
            "title": "Komercinis / lotyniškas pavadinimas (jeigu taikoma)",
            "type": "string"
          },
          "pagaminimo-data": {
            "$ref": "#/definitions/data"
          },
          "partijos-numeris": {
            "title": "Partijos nr.",
            "type": "integer"
          },
          "tinkamumo-naudoti-terminas": {
            "title": "Tinkamumo naudoti (vartoti) terminas",
            "$ref": "#/definitions/data"
          },
          "pakuotes-tipas": {
            "title": "Pakuotės tipas",
            "type": "string"
          },
          "pakuociu-skaicius": {
            "title": "Pakuočių skaičius (vnt.)",
            "type": "number"
          },
          "kiekis": {
            "title": "Kiekis (neto / bruto, kg.)",
            "type": "number"
          },
          "patvirtinimo-nr": {
            "title": "Patvirtinimo Nr.",
            "type": "string"
          },
          "laikymo-ir-transportavimo-salygos": {
            "title": "Laikymo ir transportavimo sąlygos",
            "type": "string",
            "enum": ["Aplinkos", "Atvėsintas", "Užšaldytas"]
          },
          "ar-preke-zuvis": {
            "title": "Ar prekė pagaminta iš žuvies?",
            "type": "boolean"
          },
          "zuvies-kilme": {
            "title": "Nurodykite žuvies kilmę",
            "type": "string",
            "enum": ["Laukinė", "Užauginta"]
          },
          "ar-sudetinis-produktas": {
            "title": "Ar prekė yra sudėtinis produktas?",
            "type": "boolean"
          },
          "gyvuniniu-produktu-procentas": {
            "title": "Nurodykite, kiek procentų sudaro gyvūniniai produktai",
            "type": "string"
          },
          "salis": {
            "title": "Šalis",
            "$ref": "#/definitions/salis"
          },
          "gamintojo-pavadinimas": {
            "title": "Prekės gamintojo pavadinimas",
            "type": "string"
          },
          "gamintojo-kodas": {
            "title": "Prekės gamintojo kodas",
            "$ref": "#/definitions/imones-kodas"
          },
          "gamintojo-patvirtinimo-iregistravimo-nr": {
            "title": "Gamintojo patvirtinimo ar įregistravimo nr.",
            "$ref": "#/definitions/patvirtinimo-iregistravimo-nr"
          },
          "adresas": {
            "$ref": "#/definitions/adresas"
          },
          "sertifikatas": {
            "title": "Pridėkite pirminį prekės sertifikatą",
            "$ref": "#/definitions/dokumentas"
          }
        },
        "required": [
          "kpn-kodas",
          "pavadinimas",
          "pagaminimo-data",
          "partijos-numeris",
          "tinkamumo-naudoti-terminas",
          "pakuotes-tipas",
          "pakuociu-skaicius",
          "kiekis",
          "patvirtinimo-nr",
          "laikymo-ir-transportavimo-salygos",
          "salis",
          "gamintojo-pavadinimas",
          "adresas",
          "gamintojo-patvirtinimo-iregistravimo-nr"
        ],
        "errorMessage": {
          "required": {
            "kpn-kodas": "Prekės: KPN kodas privalomas.",
            "pavadinimas": "Prekės: Pavadinimas privalomas.",
            "pagaminimo-data": "Prekės: Pagaminimo data yra privaloma.",
            "partijos-numeris": "Prekės: Partijos numeris privalomas.",
            "tinkamumo-naudoti-terminas": "Prekės: Tinkamumo naudoti terminas privalomas.",
            "pakuotes-tipas": "Prekės: Pakuotės tipas privalomas.",
            "pakuociu-skaicius": "Prekės: Pakuočių skaičius privalomas.",
            "kiekis": "Prekės: Kiekis privalomas.",
            "patvirtinimo-nr": "Prekės: Patvirtinimo numeris privalomas.",
            "laikymo-ir-transportavimo-salygos": "Prekės: Laikymo ir transportavimo sąlygos yra privalomos.",
            "salis": "Prekės: Šalis yra privaloma.",
            "gamintojo-pavadinimas": "Prekės: Gamintojo pavadinimas privalomas.",
            "adresas": "Prekės: Adresas privalomas.",
            "gamintojo-patvirtinimo-iregistravimo-nr": "Prekės: Gamintojo patvirtinimo ar įregistravimo numeris privalomas."
          }
        },
        "if": {
          "properties": {
            "salis": {
              "not": {
                "enum": [
                  "LTU",
                  "BEL",
                  "ITA",
                  "LUX",
                  "NLD",
                  "FRA",
                  "DEU",
                  "IRL",
                  "DNK",
                  "GRC",
                  "ESP",
                  "PRT",
                  "AUT",
                  "FIN",
                  "SWE",
                  "CZE",
                  "EST",
                  "CYP",
                  "LVA",
                  "POL",
                  "MLT",
                  "SVK",
                  "SVN",
                  "HUN",
                  "BGR",
                  "ROU",
                  "HRV"
                ]
              }
            }
          }
        },
        "then": {
          "required": ["sertifikatas"],
          "errorMessage": {
            "required": {
              "sertifikatas": "Prekės: Sertifikatas privalomas."
            }
          }
        },
        "else": {
          "if": {
            "properties": {
              "salis": {
                "enum": ["LTU"]
              }
            }
          },
          "then": {
            "required": ["gamintojo-kodas"],
            "errorMessage": {
              "required": {
                "gamintojo-kodas": "Prekės: Gamintojo kodas privalomas."
              }
            }
          }
        }
      }
    },
    "zaliavos": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "pavadinimas": {
            "title": "Žaliavų pavadinimas",
            "type": "string"
          },
          "kiekis": {
            "title": "Žaliavų kiekis",
            "type": "object",
            "properties": {
              "kiekis": {
                "type": "number"
              },
              "matas": {
                "type": "string",
                "enum": ["kg", "t", "vnt", "doz"]
              }
            },
            "required": ["kiekis", "matas"],
            "errorMessage": {
              "required": {
                "kiekis": "Žaliavos: Kiekis privalomas.",
                "matas": "Žaliavos: Matas privalomas"
              }
            }
          },
          "gamintojas": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "imones-pavadinimas": {
                "title": "Žaliavos gamintojo pavadinimas",
                "$ref": "#/definitions/imones-pavadinimas"
              },
              "adresas": {
                "title": "Žaliavos gamintojo adresas",
                "$ref": "#/definitions/adresas"
              },
              "patvirtinimo-numeris": {
                "title": "Žaliavos gamintojo patvirtinimo numeris",
                "type": "string"
              }
            },
            "required": ["imones-pavadinimas", "adresas", "patvirtinimo-numeris"],
            "errorMessage": {
              "required": {
                "imones-pavadinimas": "Žaliavos: Gamintojo įmonės pavadinimas privalomas.",
                "adresas": "Žaliavos: Gamintojo adresas privalomas.",
                "patvirtinimo-numeris": "Žaliavos: Gamintojo patvirtinimo numeris privalomas."
              }
            }
          },
          "gavimo-data": {
            "title": "Žaliavos gavimo data",
            "$ref": "#/definitions/data"
          },
          "partijos-numeris": {
            "title": "Žaliavos partijos numeris",
            "type": "string"
          },
          "pagamintos-prekes-kiekis": {
            "title": "Iš žaliavos pagamintos prekės kiekis",
            "type": "string"
          }
        },
        "required": [
          "pavadinimas",
          "kiekis",
          "gamintojas",
          "gavimo-data",
          "partijos-numeris",
          "pagamintos-prekes-kiekis"
        ],
        "errorMessage": {
          "required": {
            "pavadinimas": "Žaliavos: Pavadinimas privalomas.",
            "kiekis": "Žaliavos: Kiekis privalomas.",
            "gamintojas": "Žaliavos: Gamintojas privalomas.",
            "gavimo-data": "Žaliavos: Gavimo data yra privaloma.",
            "partijos-numeris": "Žaliavos: Partijos numeris privalomas.",
            "pagamintos-prekes-kiekis": "Žaliavos: Pagamintos prekės kiekis privalomas."
          }
        }
      }
    },
    "gavejas": {
      "type": "object",
      "additionalProperties": false,
      "default": {},
      "properties": {
        "asmuo": {
          "$ref": "#/definitions/asmuo-be-kodo"
        },
        "adresas": {
          "$ref": "#/definitions/adresas"
        },
        "atsakingas-asmuo": {
          "$ref": "#/definitions/atsakingas-asmuo"
        },
        "paskirties-vieta": {
          "type": "object",
          "additionalProperties": false,
          "default": {},
          "properties": {
            "asmuo": {
              "$ref": "#/definitions/asmuo-be-kodo"
            },
            "adresas": {
              "$ref": "#/definitions/adresas"
            },
            "patvirtinimo-iregistravimo-nr": {
              "$ref": "#/definitions/patvirtinimo-iregistravimo-nr"
            }
          },
          "required": ["patvirtinimo-iregistravimo-nr", "adresas", "asmuo"],
          "errorMessage": {
            "required": {
              "patvirtinimo-iregistravimo-nr": "Gavėjas: Patvirtinimo ir registravimo numeris privalomas paskirties vietoje.",
              "adresas": "Gavėjas: Adresas privalomas paskirties vietoje.",
              "asmuo": "Gavėjas: Asmuo privalomas paskirties vietoje."
            }
          }
        }
      }
    },
    "dokumentai": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "apmokejimas": {
          "$ref": "#/definitions/dokumentas"
        },
        "laboratoriniai-tyrimai": {
          "$ref": "#/definitions/dokumentas"
        },
        "vaztarastis": {
          "$ref": "#/definitions/dokumentas"
        },
        "saskaita-faktura": {
          "$ref": "#/definitions/dokumentas"
        },
        "papildomi-dokumentai": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/dokumentas"
          }
        },
        "papildoma-informacija": {
          "type": "string"
        },
        "sutikimas": {
          "title": "Aš, atsakingas asmuo, patvirtinu, kad prašyme pateikti duomenys yra paremti dokumentais, jie patikrinti ir atitinka tikrovę, produktų sauga ir kokybė atitinka ES ir Lietuvos bei šalies importuotojos teisės aktų reikalavimus, trečiajai šaliai priėmus sprendimą grąžinti prekę, nedelsiant informuosiu Valstybinės  maisto ir veterinarijos tarnybos skyrių, išdavusį veterinarijos sertifikatą, pateikdamas išsamią informaciją ir dokumentus.",
          "type": "boolean"
        }
      },
      "required": ["apmokejimas", "sutikimas"],
      "errorMessage": {
        "required": {
          "apmokejimas": "Dokumentai: Apmokėjimas privalomas.",
          "sutikimas": "Dokumentai: Sutikimas yra būtinas ir turi būti pateiktas pažymint laukelį."
        }
      }
    }
  },
  "required": ["siuntejas", "marsrutas", "gavejas"],
  "errorMessage": {
    "required": {
      "siuntejas": "Siuntėjo informacija yra privaloma.",
      "marsrutas": "Kelionės maršruto informacija yra privaloma.",
      "gavejas": "Gavėjo informacija yra privaloma."
    }
  },
  "definitions": {
    "asmens-tipas": {
      "title": "Asmens tipas",
      "type": "string",
      "enum": ["Juridinis asmuo", "Fizinis asmuo"],
      "default": "Juridinis asmuo"
    },
    "asmuo-be-kodo": {
      "type": "object",
      "required": ["tipas"],
      "default": {},
      "if": { "properties": { "tipas": { "const": "Fizinis asmuo" } } },
      "then": {
        "required": ["vardas-pavarde"],
        "errorMessage": {
          "required": {
            "vardas-pavarde": "Vardas ir pavardė yra privalomi."
          }
        }
      },
      "else": {
        "required": ["imones-pavadinimas"],
        "errorMessage": {
          "required": {
            "imones-pavadinimas": "Įmonės pavadinimas privalomas."
          }
        }
      },
      "properties": {
        "tipas": {
          "$ref": "#/definitions/asmens-tipas"
        },
        "imones-pavadinimas": {
          "$ref": "#/definitions/imones-pavadinimas"
        },
        "vardas-pavarde": {
          "$ref": "#/definitions/vardas-pavarde"
        }
      }
    },
    "asmuo-su-kodu": {
      "type": "object",
      "required": ["tipas"],
      "default": {},
      "if": { "properties": { "tipas": { "const": "Fizinis asmuo" } } },
      "then": {
        "required": ["vardas-pavarde", "asmens-kodas"],
        "errorMessage": {
          "required": {
            "vardas-pavarde": "Vardas ir pavardė yra privalomi.",
            "asmens-kodas": "Asmens kodas privalomas."
          }
        }
      },
      "else": {
        "required": ["imones-pavadinimas", "imones-kodas"],
        "errorMessage": {
          "required": {
            "imones-pavadinimas": "Įmonės pavadinimas privalomas.",
            "imones-kodas": "Įmonės kodas privalomas."
          }
        }
      },
      "properties": {
        "tipas": {
          "$ref": "#/definitions/asmens-tipas"
        },
        "imones-pavadinimas": {
          "$ref": "#/definitions/imones-pavadinimas"
        },
        "vardas-pavarde": {
          "$ref": "#/definitions/vardas-pavarde"
        },
        "imones-kodas": {
          "$ref": "#/definitions/imones-kodas"
        },
        "asmens-kodas": {
          "$ref": "#/definitions/asmens-kodas"
        }
      }
    },
    "atsakingas-asmuo": {
      "title": "Atsakingas asmuo",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "vardas-pavarde": {
          "$ref": "#/definitions/vardas-pavarde"
        },
        "pareigos": {
          "title": "Pareigos",
          "type": "string",
          "maxLength": 100,
          "errorMessage": {
            "maxLength": "Pareigos negali būti ilgesnės nei 100 simbolių."
          }
        },
        "telefono-nr": {
          "title": "Telefono nr.",
          "type": "string",
          "pattern": "^\\+?[\\d\\s\\-\\(\\)]{8,15}$",
          "errorMessage": {
            "pattern": "Telefono numeris turi būti galiojantis"
          }
        },
        "el-pastas": {
          "title": "El. paštas",
          "type": "string",
          "format": "email",
          "maxLength": 254,
          "errorMessage": {
            "format": "El. paštas turi būti galiojantis",
            "maxLength": "El. paštas negali būti ilgesnis nei 254 simboliai."
          }
        }
      },
      "required": ["vardas-pavarde", "pareigos", "telefono-nr", "el-pastas"],
      "errorMessage": {
        "required": {
          "vardas-pavarde": "Vardas ir pavardė yra privalomi.",
          "pareigos": "Pareigos yra privalomos.",
          "telefono-nr": "Telefono numeris privalomas.",
          "el-pastas": "El. paštas privalomas."
        }
      }
    },
    "adresas": {
      "title": "Adresas",
      "type": "string"
    },
    "patvirtinimo-iregistravimo-nr": {
      "title": "Patvirtinimo/Įregistravimo Nr.",
      "type": "string"
    },
    "laikas": {
      "title": "Laikas",
      "type": "string",
      "format": "time"
    },
    "data": {
      "title": "Data",
      "type": "string",
      "format": "date"
    },
    "imones-pavadinimas": {
      "title": "Ūkio subjekto pavadinimas",
      "type": "string"
    },
    "vardas-pavarde": {
      "title": "Vardas, pavardė",
      "type": "string"
    },
    "imones-kodas": {
      "title": "Juridinio asmens kodas",
      "type": "string",
      "pattern": "\\d{9}",
      "errorMessage": {
        "pattern": "Juridinio asmens kodas turi būti galiojantis"
      }
    },
    "asmens-kodas": {
      "title": "Asmens kodas",
      "type": "string",
      "pattern": "[0-9]{11}",
      "errorMessage": {
        "pattern": "Asmens kodas turi būti galiojantis"
      }
    },
    "dokumentas": {
      "type": "object",
      "required": ["url"],
      "errorMessage": {
        "required": {
          "url": "Failas privalomas."
        }
      },
      "properties": {
        "url": {
          "type": "string",
          "format": "url"
        },
        "name": {
          "type": "string"
        },
        "size": {
          "type": "number"
        }
      }
    },
    "salis": {
      "type": "string",
      "fetchEnumFrom": "countries.getCountryIds"
    }
  }
}

{
  "type": "object",
  "title": "Sertifikatas gyvūnų siuntai",
  "additionalProperties": false,
  "properties": {
    "siuntejas": {
      "type": "object",
      "title": "Siuntėjas",
      "additionalProperties": false,
      "default": {},
      "properties": {
        "asmuo": {
          "$ref": "#/definitions/asmuo-su-kodu"
        },
        "adresas": {
          "$ref": "#/definitions/adresas"
        },
        "patvirtinimo-iregistravimo-nr": {
          "$ref": "#/definitions/patvirtinimo-iregistravimo-nr"
        },
        "atsakingas-asmuo": {
          "$ref": "#/definitions/atsakingas-asmuo"
        }
      },
      "required": ["asmuo", "adresas", "patvirtinimo-iregistravimo-nr", "atsakingas-asmuo"],
      "errorMessage": {
        "required": {
          "asmuo": "Siuntėjas: Asmuo privalomas.",
          "adresas": "Siuntėjas: Adresas privalomas.",
          "patvirtinimo-iregistravimo-nr": "Siuntėjas: Patvirtinimo ir registravimo numeris privalomas.",
          "atsakingas-asmuo": "Siuntėjas: Atsakingas asmuo privalomas."
        }
      }
    },
    "marsrutas": {
      "type": "object",
      "title": "Kelionės maršrutas",
      "additionalProperties": false,
      "default": {},
      "validateEuTransit": true,
      "required": ["eksportuojanti-salis", "tranzitines-salys", "importuojanti-salis"],
      "errorMessage": {
        "required": {
          "eksportuojanti-salis": "Maršrutas: Eksportuojanti šalis turi būti nurodyta.",
          "tranzitines-salys": "Maršrutas: Tranzitinės šalys turi būti pateiktos.",
          "importuojanti-salis": "Maršrutas: Importuojanti šalis turi būti nurodyta."
        }
      },

      "properties": {
        "eksportuojanti-salis": {
          "type": "object",
          "additionalProperties": false,
          "required": ["salis"],
          "default": {},
          "errorMessage": {
            "required": {
              "salis": "Maršrutas: Eksportuojanti šalis yra privaloma."
            }
          },
          "properties": {
            "salis": {
              "title": "Eksportuojanti šalis",
              "$ref": "#/definitions/salis",
              "default": "LTU"
            },
            "pkp-out": {
              "title": "Išvažiavimo PKP",
              "type": "string"
            }
          }
        },
        "tranzitines-salys": {
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["salis", "poilsio-punktas", "patvirtinimo-numeris"],
            "errorMessage": {
              "required": {
                "salis": "Maršrutas: Tranzitinė šalis yra privaloma.",
                "pkp": "Maršrutas: PKP pavadinimas privalomas.",
                "poilsio-punktas": "Maršrutas: Poilsio punkto pavadinimas privalomas.",
                "patvirtinimo-numeris": "Maršrutas: Patvirtinimo numeris privalomas."
              }
            },
            "properties": {
              "salis": {
                "title": "Tranzitinė šalis",
                "$ref": "#/definitions/salis"
              },
              "pkp": {
                "title": "Įvažiavimo PKP",
                "type": "string"
              },
              "pkp-out": {
                "title": "Išvažiavimo PKP",
                "type": "string"
              },
              "poilsio-punktas": {
                "title": "Poilsio punkto pavadinimas",
                "type": "string"
              },
              "patvirtinimo-numeris": {
                "title": "Patvirtinimo Nr.",
                "type": "string"
              }
            }
          }
        },
        "importuojanti-salis": {
          "type": "object",
          "additionalProperties": false,
          "required": ["salis"],
          "errorMessage": {
            "required": {
              "salis": "Maršrutas: Importuojanti šalis yra privaloma.",
              "pkp": "Maršrutas: PKP pavadinimas privalomas."
            }
          },
          "properties": {
            "salis": {
              "title": "Importuojanti šalis",
              "$ref": "#/definitions/salis"
            },
            "pkp": {
              "title": "Įvažiavimo PKP",
              "type": "string"
            }
          }
        }
      }
    },
    "vezejas": {
      "type": "object",
      "title": "Vežėjo kontaktinė informacija",
      "additionalProperties": false,
      "required": [
        "asmuo",
        "adresas",
        "patvirtinimo-iregistravimo-nr",
        "transporto-priemones",
        "priziuretojai"
      ],
      "errorMessage": {
        "required": {
          "asmuo": "Vežėjas: Asmuo privalomas.",
          "adresas": "Vežėjas: Adresas privalomas.",
          "patvirtinimo-iregistravimo-nr": "Vežėjas: Patvirtinimo ir registravimo numeris privalomas.",
          "transporto-priemones": "Vežėjas: Transporto priemonės yra privalomos.",
          "priziuretojai": "Vežėjas: Prižiūrėtojai yra privalomi."
        }
      },
      "properties": {
        "asmuo": {
          "$ref": "#/definitions/asmuo-su-kodu"
        },
        "adresas": {
          "$ref": "#/definitions/adresas"
        },
        "patvirtinimo-iregistravimo-nr": {
          "$ref": "#/definitions/patvirtinimo-iregistravimo-nr"
        },
        "transporto-priemones": {
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["rusis"],
            "errorMessage": {
              "required": {
                "rusis": "Vežėjas: Transporto rūšis yra privaloma."
              }
            },
            "properties": {
              "rusis": {
                "title": "Transporto priemonės rūšis",
                "type": "string",
                "enum": ["Autokelių transporto priemonė", "Traukinys", "Lėktuvas", "Laivas", "Kita"]
              },
              "rusis-kita": {
                "title": "Nurodykite transporto rūšį",
                "type": "string"
              },
              "numeris": {
                "title": "Transporto priemonės Nr.",
                "type": "string"
              }
            }
          }
        },
        "transporto-priemones-dalys": {
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["dalis"],
            "errorMessage": {
              "required": {
                "dalis": "Vežėjas: Transporto priemonės dalis yra privaloma."
              }
            },
            "properties": {
              "dalis": {
                "title": "Transporto priemonės dalis",
                "type": "string",
                "enum": [
                  "Konteineris",
                  "Cisterna",
                  "Vagonas",
                  "Priekaba",
                  "Puspriekabė",
                  "Dėžė",
                  "Narvas",
                  "Kita"
                ]
              },
              "dalis-kita": {
                "title": "Nurodykite transporto priemonės dalį",
                "type": "string"
              },
              "numeris": {
                "type": "string"
              },
              "patvirtinimo-iregistravimo-nr": {
                "$ref": "#/definitions/patvirtinimo-iregistravimo-nr"
              }
            }
          }
        },
        "priziuretojai": {
          "type": "array",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["vardas", "pavarde", "pazymejimo-nr"],
            "errorMessage": {
              "required": {
                "vardas": "Vežėjas: Prižiūrėtojui turi būti nurodytas vardas.",
                "pavarde": "Vežėjas: Prižiūrėtojui turi būti nurodyta pavardė.",
                "pazymejimo-nr": "Vežėjas: Kompetencijos pažymėjimo numeris yra būtinas prižiūrėtojui."
              }
            },
            "properties": {
              "vardas": {
                "title": "Vardas",
                "type": "string"
              },
              "pavarde": {
                "title": "Pavardė",
                "type": "string"
              },
              "pazymejimo-nr": {
                "title": "Kompetencijos pažymėjimo Nr.",
                "type": "string"
              }
            }
          }
        }
      }
    },
    "pakrovimo-vieta": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "atvykimo-data",
        "atvykimo-laikas",
        "trukme",
        "pakrovimo-laikas",
        "pakrovimo-data",
        "patvirtinimo-iregistravimo-nr",
        "adresas",
        "asmuo"
      ],
      "errorMessage": {
        "required": {
          "atvykimo-data": "Pakrovimo vieta: Atvykimo data yra privaloma.",
          "atvykimo-laikas": "Pakrovimo vieta: Atvykimo laikas privalomas.",
          "trukme": "Pakrovimo vieta: Kelionės trukmė yra privaloma.",
          "pakrovimo-laikas": "Pakrovimo vieta: Pakrovimo laikas privalomas.",
          "pakrovimo-data": "Pakrovimo vieta: Pakrovimo data yra privaloma.",
          "patvirtinimo-iregistravimo-nr": "Pakrovimo vieta: Patvirtinimo ir registravimo numeris privalomas.",
          "adresas": "Pakrovimo vieta: Adresas privalomas.",
          "asmuo": "Pakrovimo vieta: Asmuo su kodu privalomas."
        }
      },
      "properties": {
        "asmuo": {
          "$ref": "#/definitions/asmuo-su-kodu"
        },
        "adresas": {
          "$ref": "#/definitions/adresas"
        },
        "patvirtinimo-iregistravimo-nr": {
          "$ref": "#/definitions/patvirtinimo-iregistravimo-nr"
        },
        "pakrovimo-data": {
          "$ref": "#/definitions/data",
          "title": "Numatoma pakrovimo pradžios data"
        },
        "pakrovimo-laikas": {
          "$ref": "#/definitions/laikas",
          "title": "Numatomas pakrovimo pradžios laikas"
        },
        "atvykimo-data": {
          "title": "Numatoma siuntos atvykimo data",
          "$ref": "#/definitions/data"
        },
        "atvykimo-laikas": {
          "title": "Numatomas siuntos atvykimo laikas",
          "$ref": "#/definitions/laikas"
        },
        "trukme": {
          "title": "Bendra kelionės trukmė valandomis",
          "type": "string"
        }
      }
    },
    "gyvunai": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "kodas",
          "rusis",
          "kiekis",
          "siuntos-paskirtis",
          "svoris",
          "atpazinimo-priemone"
        ],
        "errorMessage": {
          "required": {
            "kodas": "Gyvūnui turi būti privalomas kodas.",
            "rusis": "Gyvūno rūšis yra privaloma.",
            "kiekis": "Gyvūnų skaičius privalomas.",
            "siuntos-paskirtis": "Siuntos paskirtis yra privaloma.",
            "svoris": "Gyvūno svoris privalomas.",
            "atpazinimo-priemone": "Atpažinimo priemonė yra privaloma."
          }
        },
        "properties": {
          "kodas": {
            "title": "Nomenklatūrinis pavadinimas ir kodas",
            "$ref": "#/definitions/gyvuno-kodas"
          },
          "rusis": {
            "type": "string",
            "title": "Gyvūnų rūšis"
          },
          "kiekis": {
            "type": "number",
            "title": "Gyvūnų skaičius, vnt"
          },
          "siuntos-paskirtis": {
            "title": "Siuntos paskirtis",
            "$ref": "#/definitions/gyvuno-siuntos-paskirtis"
          },
          "svoris": {
            "type": "number",
            "title": "Bendras svoris, kg"
          },
          "atpazinimo-priemone": {
            "$ref": "#/definitions/gyvuno-atpazinimo-priemone",
            "title": "Gyvūno atpažinimo priemonė"
          },
          "bandos-nr": {
            "title": "Bandos Nr.",
            "type": "string"
          },
          "pakuociu-skaicius": {
            "title": "Pakuočių skaičius",
            "type": "string"
          },
          "paukstides-nr": {
            "title": "Paukštidės Nr.",
            "type": "string"
          },
          "patvirtinimo-iregistravimo-nr": {
            "$ref": "#/definitions/patvirtinimo-iregistravimo-nr"
          },
          "identifikacijos-nr": {
            "title": "Identifikacijos Nr.",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "gavejas": {
      "type": "object",
      "additionalProperties": false,
      "default": {},
      "properties": {
        "asmuo": {
          "$ref": "#/definitions/asmuo-be-kodo"
        },
        "adresas": {
          "$ref": "#/definitions/adresas"
        },
        "paskirties-vieta": {
          "type": "object",
          "additionalProperties": false,
          "default": {},
          "properties": {
            "asmuo": {
              "$ref": "#/definitions/asmuo-be-kodo"
            },
            "adresas": {
              "$ref": "#/definitions/adresas"
            },
            "salis": {
              "title": "Šalis",
              "$ref": "#/definitions/salis"
            },
            "patvirtinimo-iregistravimo-nr": {
              "$ref": "#/definitions/patvirtinimo-iregistravimo-nr"
            }
          },
          "required": ["salis", "patvirtinimo-iregistravimo-nr", "adresas", "asmuo"],
          "errorMessage": {
            "required": {
              "salis": "Gavėjas: Šalis yra privaloma.",
              "patvirtinimo-iregistravimo-nr": "Gavėjas: Patvirtinimo ir registravimo numeris privalomas.",
              "adresas": "Gavėjas: Adresas paskirties vietoje privalomas.",
              "asmuo": "Gavėjas: Asmuo paskirties vietoje privalomas."
            }
          }
        }
      }
    },
    "dokumentai": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "apmokejimas": {
          "$ref": "#/definitions/dokumentas"
        },
        "marsruto-planas": {
          "$ref": "#/definitions/dokumentas"
        },
        "uzkreciamuju-ligu-tyrimo-protokolas": {
          "$ref": "#/definitions/dokumentas"
        },
        "saskaita-faktura": {
          "$ref": "#/definitions/dokumentas"
        },
        "papildomi-dokumentai": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/dokumentas"
          }
        },
        "papildoma-informacija": {
          "type": "string"
        },
        "sutikimas": {
          "title": "Aš, atsakingas asmuo, patvirtinu, kad prašyme pateikti duomenys yra paremti dokumentais, jie patikrinti ir atitinka tikrovę, vežami gyvūnai atitinka ES ir Lietuvos bei šalies importuotojos teisės aktų reikalavimus.",
          "type": "boolean"
        }
      },

      "required": ["apmokejimas", "sutikimas"],
      "errorMessage": {
        "required": {
          "apmokejimas": "Dokumentai: Apmokėjimas privalomas.",
          "sutikimas": "Dokumentai: Sutikimas yra būtinas ir turi būti pateiktas pažymint laukelį."
        }
      }
    }
  },
  "required": ["siuntejas", "marsrutas", "gavejas"],
  "errorMessage": {
    "required": {
      "siuntejas": "Siuntėjo informacija yra privaloma.",
      "marsrutas": "Kelionės maršruto informacija yra privaloma.",
      "gavejas": "Gavėjo informacija yra privaloma."
    }
  },
  "definitions": {
    "asmens-tipas": {
      "title": "Asmens tipas",
      "type": "string",
      "enum": ["Juridinis asmuo", "Fizinis asmuo"],
      "default": "Juridinis asmuo"
    },
    "asmuo-be-kodo": {
      "type": "object",
      "required": ["tipas"],
      "default": {},
      "if": { "properties": { "tipas": { "const": "Fizinis asmuo" } } },
      "then": {
        "required": ["vardas-pavarde"],
        "errorMessage": {
          "required": {
            "vardas-pavarde": "Vardas ir pavardė yra privalomi."
          }
        }
      },
      "else": {
        "required": ["imones-pavadinimas"],
        "errorMessage": {
          "required": {
            "imones-pavadinimas": "Įmonės pavadinimas privalomas."
          }
        }
      },
      "properties": {
        "tipas": {
          "$ref": "#/definitions/asmens-tipas"
        },
        "imones-pavadinimas": {
          "$ref": "#/definitions/imones-pavadinimas"
        },
        "vardas-pavarde": {
          "$ref": "#/definitions/vardas-pavarde"
        }
      }
    },
    "asmuo-su-kodu": {
      "type": "object",
      "required": ["tipas"],
      "default": {},
      "if": {
        "properties": {
          "tipas": { "const": "Fizinis asmuo" }
        }
      },
      "then": {
        "required": ["vardas-pavarde", "asmens-kodas"],
        "errorMessage": {
          "required": {
            "vardas-pavarde": "Vardas ir pavardė yra privalomi.",
            "asmens-kodas": "Asmens kodas privalomas."
          }
        }
      },
      "else": {
        "required": ["imones-pavadinimas", "imones-kodas"],
        "errorMessage": {
          "required": {
            "imones-pavadinimas": "Įmonės pavadinimas privalomas.",
            "imones-kodas": "Įmonės kodas privalomas."
          }
        }
      },
      "properties": {
        "tipas": {
          "$ref": "#/definitions/asmens-tipas"
        },
        "imones-pavadinimas": {
          "$ref": "#/definitions/imones-pavadinimas"
        },
        "vardas-pavarde": {
          "$ref": "#/definitions/vardas-pavarde"
        },
        "imones-kodas": {
          "$ref": "#/definitions/imones-kodas"
        },
        "asmens-kodas": {
          "$ref": "#/definitions/asmens-kodas"
        }
      }
    },
    "atsakingas-asmuo": {
      "title": "Atsakingas asmuo",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "vardas-pavarde": {
          "$ref": "#/definitions/vardas-pavarde"
        },
        "pareigos": {
          "title": "Pareigos",
          "type": "string",
          "maxLength": 100,
          "errorMessage": {
            "maxLength": "Pareigos negali būti ilgesnės nei 100 simbolių."
          }
        },
        "telefono-nr": {
          "title": "Telefono nr.",
          "type": "string",
          "pattern": "^\\+?[\\d\\s\\-\\(\\)]{8,15}$",
          "errorMessage": {
            "pattern": "Telefono numeris turi būti galiojantis"
          }
        },
        "el-pastas": {
          "title": "El. paštas",
          "type": "string",
          "format": "email",
          "maxLength": 254,
          "errorMessage": {
            "format": "El. paštas turi būti galiojantis",
            "maxLength": "El. paštas negali būti ilgesnis nei 254 simboliai."
          }
        }
      },
      "required": ["vardas-pavarde", "pareigos", "telefono-nr", "el-pastas"],
      "errorMessage": {
        "required": {
          "vardas-pavarde": "Vardas ir pavardė yra privalomi.",
          "pareigos": "Pareigos yra privalomos.",
          "telefono-nr": "Telefono numeris privalomas.",
          "el-pastas": "El. paštas privalomas."
        }
      }
    },
    "adresas": {
      "title": "Adresas",
      "type": "string"
    },
    "gyvuno-kodas": {
      "type": "string",
      "fetchEnumFrom": "kpn.getParentIds"
    },
    "gyvuno-atpazinimo-priemone": {
      "type": "string",
      "enum": ["Ausų įsagos", "Mikroschema", "Pasas", "Bandos numeris", "Tatuiruotė"]
    },
    "gyvuno-siuntos-paskirtis": {
      "type": "string",
      "enum": [
        "Veisti",
        "Skersti",
        "Produkcijai",
        "Tolesniam auginimui",
        "Gyvūno augintinio perkėlimas nekomerciniais tikslais"
      ]
    },
    "patvirtinimo-iregistravimo-nr": {
      "title": "Patvirtinimo/Įregistravimo Nr.",
      "type": "string"
    },
    "laikas": {
      "type": "string",
      "format": "time"
    },
    "data": {
      "type": "string",
      "format": "date"
    },
    "imones-pavadinimas": {
      "title": "Ūkio subjekto pavadinimas",
      "type": "string"
    },
    "vardas-pavarde": {
      "title": "Vardas, pavardė",
      "type": "string"
    },
    "imones-kodas": {
      "title": "Juridinio asmens kodas",
      "type": "string",
      "pattern": "^[0-9]{9}",
      "errorMessage": {
        "pattern": "Juridinio asmens kodas turi būti galiojantis"
      }
    },
    "asmens-kodas": {
      "title": "Asmens kodas",
      "type": "string",
      "pattern": "^[0-9]{11}",
      "errorMessage": {
        "pattern": "Asmens kodas turi būti galiojantis"
      }
    },
    "dokumentas": {
      "type": "object",
      "required": ["url"],
      "errorMessage": {
        "required": {
          "url": "Failas privalomas."
        }
      },
      "properties": {
        "url": {
          "type": "string",
          "format": "url"
        },
        "name": {
          "type": "string"
        },
        "size": {
          "type": "number"
        }
      }
    },
    "salis": {
      "type": "string",
      "fetchEnumFrom": "countries.getCountryIds"
    }
  }
}
